# Gate Node Configuration
# Copy this file to .env and fill in your values

# =========================
# Identity
# =========================
GATE_ID=gate-001
ORG_ID=DKUT

# =========================
# Backend API
# =========================
# Your Railway FastAPI URL (production)
BACKEND_URL=http://127.0.0.1:8000
# BACKEND_URL=https://gate-backend-production-0141.up.railway.app
SYNC_INTERVAL_SECONDS=120

# =========================
# Camera
# =========================
CAMERA_INDEX=0
CAMERA_WIDTH=640
CAMERA_HEIGHT=480
CAMERA_FPS=30

# =========================
# Models
# =========================
# Use the same buffalo_l models as backend-fastapi
# Note: InsightFace structure is {root}/models/{name}/ so path has double "models"
SCRFD_MODEL_PATH=../backend-fastapi/models/models/buffalo_l/det_10g.onnx
# IMPORTANT: Must use the SAME ArcFace model as backend for compatible embeddings
# w600k_r50.onnx from InsightFace buffalo_l (NOT arcface.onnx from ONNX Model Zoo!)
ARCFACE_MODEL_PATH=../backend-fastapi/models/models/buffalo_l/w600k_r50.onnx

# =========================
# Recognition
# =========================
# Cosine similarity threshold: 0.50 = DEFINITE MATCH (security-grade)
RECOGNITION_THRESHOLD=0.50
WANTED_CONFIDENCE_THRESHOLD=0.70
MAX_RECOGNITION_ATTEMPTS=3
TRACK_COOLDOWN_SECONDS=30

# =========================
# GPIO (Gate Control)
# =========================
# Set GPIO_ENABLED=true on actual Raspberry Pi
GPIO_ENABLED=false
GPIO_RELAY_PIN=17
GPIO_ACTIVE_LOW=true
GATE_OPEN_DURATION=7.0
GATE_COOLDOWN=2.0

# =========================
# Display (HDMI)
# =========================
DISPLAY_ENABLED=true
DISPLAY_WIDTH=1280
DISPLAY_HEIGHT=720

# Display modes:
# - "continuous" = Show live video feed with all face boxes (for DEMO/DEVELOPMENT)
# - "alert_only" = Only show UNKNOWN/WANTED faces (for PRODUCTION - saves resources)
DISPLAY_MODE=continuous

# How long to show alert screen (seconds)
ALERT_DISPLAY_DURATION=60.0

# =========================
# MQTT
# =========================
# For streaming commands from admin dashboard
MQTT_ENABLED=false
MQTT_BROKER=localhost
MQTT_PORT=1883
MQTT_TOPIC=gate-node/commands

# =========================
# LiveKit (Optional)
# =========================
# For admin livestreaming feature
# LIVEKIT_URL=wss://your-livekit-server.com

# =========================
# Storage
# =========================
DATA_DIR=data
LOG_DB_PATH=data/logs.db
INDEX_PATH=data/faces.index
METADATA_PATH=data/faces_metadata.json
VERSION_PATH=data/sync_version.txt
